<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>DUMMIE!</title>
    <link rel="icon" type="image/x-icon" href="/static/img/favicon.ico">
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css?h=4c5191231fb84669227711b1cb0f64b0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <link rel="stylesheet" href="/static/css/styles.min.css?h=c2ba1ae05e9788dd7daa20bfe3d8a653">
</head>

<body id="page-top" data-bs-spy="scroll" data-bs-target="#mainNav" data-bs-offset="77">
    <nav class="navbar navbar-expand-md fixed-top navbar-light" id="mainNav">
        <div class="container"><a class="navbar-brand" href="#">you have been tracked!</a><button
                data-bs-toggle="collapse" class="navbar-toggler navbar-toggler-right" data-bs-target="#navbarResponsive"
                type="button" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"
                value="Menu"><i class="fa fa-bars"></i></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item nav-link"><a class="nav-link active" href="#home">see the map</a></li>
                    <li class="nav-item nav-link"></li>
                    <li class="nav-item nav-link"></li>
                </ul>
            </div>
        </div>
    </nav>
    <header class="masthead"
        style="background-image:url('/static/img/intro-bg.jpg?h=145cae4a8124ee5dac950230c1552d3c');">
        <div class="intro-body">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 mx-auto">
                        <h1 class="brand-heading">THIS COULD HAVE BEEN A SCAM!</h1>
                        <p class="intro-text">You are not the only one who clicked!</p><a
                            class="btn btn-link btn-circle" role="button" href="#home"><i
                                class="fa fa-angle-double-down animated"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <section class="text-center content-section" id="home">
        <h2>ALL THE DUMMIES!</h2>
        <div id="map" style="height: 400px;"></div>
    </section>
    <!-- Start: Map Clean -->
    <div class="map-clean"></div>
    <!-- End: Map Clean -->
    <script>
        // Obtener la dirección IP del cliente mediante una solicitud a ipify.org
        fetch('https://api64.ipify.org?format=json')
            .then(response => response.json())
            .then(data => {
                const ipAddress = data.ip;
                // Guardar la dirección IP en una cookie con JavaScript
                document.cookie = `client_ip=${ipAddress}`;
            })
            .catch(error => console.error('Error al obtener la dirección IP:', error));
  

        function initMap() {
            var latitude = {{ latitude }};
            var longitude = {{ longitude }};
            var locations = {{ locations | tojson }};
    
            var map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 40.416775, lng: -3.703790 },
                zoom: 6
            });
    
            var actual = new google.maps.Marker({
                position: { lat: latitude, lng: longitude },
                map: map,
                icon: 'http://maps.google.com/mapfiles/ms/icons/yellow-dot.png',
                title: 'IM A DUMMIE'
            });

            // Recorrer el array 'locations' y agregar marcadores para cada ubicación
            for (var i = 0; i < locations.length; i++) {
                var location = locations[i];
                // Verificar que los valores de latitud y longitud sean números válidos antes de crear el marcador
                if (!isNaN(location[2]) && !isNaN(location[3])) {
                    var marker = new google.maps.Marker({
                        position: { lat: parseFloat(location[2]), lng: parseFloat(location[3]) },
                        map: map,
                        title: 'Im dummie: ' + location[0] + ', with IP: ' + location[1]
                    });
                }
            }
        }
    </script>    
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAngEgB_REaYvCSzd6X41LbFrlXhA4pgFo&callback=initMap" async defer></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script src="/static/assets/js/script.min.js?h=d1953027678454c794560b0e144881c1"></script>
</body>

</html>
